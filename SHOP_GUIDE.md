# üõçÔ∏è –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–º—É –º–∞–≥–∞–∑–∏–Ω—É

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **–ú–∞–≥–∞–∑–∏–Ω (ShopPage)**
- ‚úÖ –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: –ö–∞—Ä—Ç–æ—á–∫–∏ üé¥ –∏ –ö–∞—Ä—Ç–∏–Ω—ã üé®
- ‚úÖ –§–∏–ª—å—Ç—Ä –ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏ (–û–±—ã—á–Ω–∞—è, –†–µ–¥–∫–∞—è, –£–ª—å—Ç—Ä–∞)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–í –∫–æ—Ä–∑–∏–Ω—É" –Ω–∞ –∫–∞–∂–¥–æ–º —Ç–æ–≤–∞—Ä–µ
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É
- ‚úÖ –°—á–µ—Ç—á–∏–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ (–±–µ–π–¥–∂)

### 2. **–ö–æ—Ä–∑–∏–Ω–∞ (CartPage)**
#### –®–∞–≥ 1: –ö–æ—Ä–∑–∏–Ω–∞
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (+/-)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –ü–æ–¥—Å—á–µ—Ç —Å—É–º–º—ã + –¥–æ—Å—Ç–∞–≤–∫–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage

#### –®–∞–≥ 2: –î–æ—Å—Ç–∞–≤–∫–∞
- ‚úÖ –§–æ—Ä–º–∞ —Å –ø–æ–ª—è–º–∏:
  - –§–ò–û *
  - –¢–µ–ª–µ—Ñ–æ–Ω *
  - Email *
  - –°—Ç—Ä–∞–Ω–∞ *
  - –ì–æ—Ä–æ–¥ *
  - –ê–¥—Ä–µ—Å *
  - –ò–Ω–¥–µ–∫—Å
  - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π

#### –®–∞–≥ 3: –û–ø–ª–∞—Ç–∞
- ‚úÖ –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã:
  - üí≥ –ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞
  - üì± –°–ë–ü
  - üõí OZON Pay
- ‚úÖ –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞
- ‚úÖ –ó–∞—â–∏—â–µ–Ω–Ω–∞—è –æ–ø–ª–∞—Ç–∞

### 3. **–ù–∞–≤–∏–≥–∞—Ü–∏—è**
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "üõí –ö–æ—Ä–∑–∏–Ω–∞" –≤ —à–∞–ø–∫–µ –º–∞–≥–∞–∑–∏–Ω–∞
- ‚úÖ –ö—Ä–∞—Å–Ω—ã–π –±–µ–π–¥–∂ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–ª—å—Å–∞—Ü–∏–∏ –±–µ–π–¥–∂–∞

---

## üöÄ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### **–ú–∞–≥–∞–∑–∏–Ω:**
```
https://portfolio.cards/shop
```

### **–ö–æ—Ä–∑–∏–Ω–∞:**
```
https://portfolio.cards/cart
```

### **–ü—Ä–æ—Ü–µ—Å—Å –ø–æ–∫—É–ø–∫–∏:**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –º–∞–≥–∞–∑–∏–Ω
2. –ù–∞–∂–º–∏—Ç–µ "üõí –í –∫–æ—Ä–∑–∏–Ω—É" –Ω–∞ –ª—é–±–æ–º —Ç–æ–≤–∞—Ä–µ
3. –£–≤–∏–¥–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏
4. –ù–∞–∂–º–∏—Ç–µ "üõí –ö–æ—Ä–∑–∏–Ω–∞ (1)" –≤ —à–∞–ø–∫–µ
5. –ò–∑–º–µ–Ω–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–ª–∏ —É–¥–∞–ª–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã
6. –ù–∞–∂–º–∏—Ç–µ "–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é"
7. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –¥–æ—Å—Ç–∞–≤–∫–∏
8. –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
9. –ù–∞–∂–º–∏—Ç–µ "–û–ø–ª–∞—Ç–∏—Ç—å"

---

## üìù –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å

### 1. **–¢–æ–≤–∞—Ä—ã** (`frontend/src/pages/ShopPage.tsx`)
–ú–∞—Å—Å–∏–≤ `mockProducts` (—Å—Ç—Ä–æ–∫–∏ 18-92):
```typescript
{
  id: 1,
  title: "–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞",
  description: "–û–ø–∏—Å–∞–Ω–∏–µ",
  price: 2500,  // –¶–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö
  category: 'card', // 'card' –∏–ª–∏ 'art'
  rarity: 'ultra', // 'common', 'rare', 'ultra'
  image: '/images/path.jpg',
  available: true, // true –∏–ª–∏ false
  featured: true, // –ø–æ–∫–∞–∑–∞—Ç—å –≤ Featured —Å–µ–∫—Ü–∏–∏
}
```

### 2. **Telegram –¥–ª—è —Å–≤—è–∑–∏** (`frontend/src/pages/ShopPage.tsx`)
–°—Ç—Ä–æ–∫–∞ 308:
```typescript
href="https://t.me/your_username"
```
–ó–∞–º–µ–Ω–∏—Ç–µ `your_username` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π Telegram.

### 3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–∞** (`frontend/src/pages/CartPage.tsx`)
–°—Ç—Ä–æ–∫–∞ 55-110 - —Ñ—É–Ω–∫—Ü–∏—è `handlePayment()`:

**–°–µ–π—á–∞—Å:** –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–∫–∞–∑–∞ (alert + console.log)

**–î–ª—è production –Ω—É–∂–Ω–æ:**
```typescript
// 1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ –±—ç–∫–µ–Ω–¥
const response = await fetch('/api/orders', {
  method: 'POST',
  body: JSON.stringify({
    items: cart,
    delivery: deliveryForm,
    paymentMethod,
    totalPrice: finalPrice,
  })
});

// 2. –ü–æ–ª—É—á–∏—Ç—å –ø–ª–∞—Ç–µ–∂–Ω—É—é —Å—Å—ã–ª–∫—É
const { paymentUrl } = await response.json();

// 3. –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ–ø–ª–∞—Ç—É
window.location.href = paymentUrl;
```

---

## üí≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π

### **–í–∞—Ä–∏–∞–Ω—Ç—ã:**

#### 1. **YooKassa (–ÆKassa)** - –†–µ–∫–æ–º–µ–Ω–¥—É—é –¥–ª—è –†–§
```bash
npm install @a2seven/yoo-checkout
```

**Backend (Django):**
```python
from yookassa import Configuration, Payment

Configuration.account_id = 'YOUR_SHOP_ID'
Configuration.secret_key = 'YOUR_SECRET_KEY'

payment = Payment.create({
    "amount": {
        "value": "100.00",
        "currency": "RUB"
    },
    "confirmation": {
        "type": "redirect",
        "return_url": "https://portfolio.cards/success"
    },
    "description": "–ó–∞–∫–∞–∑ ‚Ññ1"
})

payment_url = payment.confirmation.confirmation_url
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://yookassa.ru/developers/

#### 2. **Tinkoff Acquiring**
- https://www.tinkoff.ru/business/acquiring/

#### 3. **Stripe** (–º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏)
- https://stripe.com/docs

---

## üì¶ Backend –¥–ª—è –∑–∞–∫–∞–∑–æ–≤ (Django)

### –°–æ–∑–¥–∞–π—Ç–µ –º–æ–¥–µ–ª—å –∑–∞–∫–∞–∑–∞:
```python
# backend/apps/shop/models.py
from django.db import models

class Order(models.Model):
    STATUS_CHOICES = [
        ('pending', '–û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã'),
        ('paid', '–û–ø–ª–∞—á–µ–Ω'),
        ('shipped', '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω'),
        ('completed', '–ó–∞–≤–µ—Ä—à–µ–Ω'),
    ]
    
    # –î–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–∞
    order_number = models.CharField(max_length=50, unique=True)
    total_price = models.DecimalField(max_digits=10, decimal_places=2)
    status = models.CharField(max_length=20, choices=STATUS_CHOICES)
    
    # –î–æ—Å—Ç–∞–≤–∫–∞
    full_name = models.CharField(max_length=200)
    phone = models.CharField(max_length=20)
    email = models.EmailField()
    address = models.TextField()
    city = models.CharField(max_length=100)
    postal_code = models.CharField(max_length=20, blank=True)
    country = models.CharField(max_length=100)
    comment = models.TextField(blank=True)
    
    # –û–ø–ª–∞—Ç–∞
    payment_method = models.CharField(max_length=20)
    payment_id = models.CharField(max_length=100, blank=True)
    
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

class OrderItem(models.Model):
    order = models.ForeignKey(Order, related_name='items', on_delete=models.CASCADE)
    product_id = models.IntegerField()
    product_title = models.CharField(max_length=200)
    quantity = models.IntegerField()
    price = models.DecimalField(max_digits=10, decimal_places=2)
```

### API endpoint:
```python
# backend/apps/shop/views.py
from rest_framework.decorators import api_view
from rest_framework.response import Response

@api_view(['POST'])
def create_order(request):
    data = request.data
    
    # 1. –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ –≤ –ë–î
    order = Order.objects.create(
        order_number=generate_order_number(),
        total_price=data['totalPrice'],
        status='pending',
        full_name=data['delivery']['fullName'],
        phone=data['delivery']['phone'],
        email=data['delivery']['email'],
        address=data['delivery']['address'],
        city=data['delivery']['city'],
        postal_code=data['delivery']['postalCode'],
        country=data['delivery']['country'],
        comment=data['delivery']['comment'],
        payment_method=data['paymentMethod'],
    )
    
    # 2. –°–æ–∑–¥–∞—Ç—å items
    for item in data['items']:
        OrderItem.objects.create(
            order=order,
            product_id=item['id'],
            product_title=item['title'],
            quantity=item['quantity'],
            price=item['price'],
        )
    
    # 3. –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂ —á–µ—Ä–µ–∑ YooKassa
    payment = create_payment(order)
    
    # 4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
    send_telegram_notification(order)
    
    return Response({
        'orderId': order.id,
        'paymentUrl': payment.confirmation.confirmation_url
    })
```

---

## üì± Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–í `handlePayment()` –¥–æ–±–∞–≤—å—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É –≤ Telegram Bot:

```typescript
// –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    chat_id: YOUR_CHAT_ID,
    text: `üõçÔ∏è –ù–û–í–´–ô –ó–ê–ö–ê–ó\n\n${orderMessage}`,
    parse_mode: 'HTML'
  })
});
```

---

## üé® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏:
`frontend/src/pages/CartPage.tsx`, —Å—Ç—Ä–æ–∫–∞ 34:
```typescript
const deliveryPrice = 500; // –ò–∑–º–µ–Ω–∏—Ç–µ –∑–¥–µ—Å—å
```

### –ò–∑–º–µ–Ω–∏—Ç—å —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã:
–î–æ–±–∞–≤—å—Ç–µ –∏–ª–∏ —É–¥–∞–ª–∏—Ç–µ –º–µ—Ç–æ–¥—ã –≤ —Ä–∞–∑–¥–µ–ª–µ Payment Step (—Å—Ç—Ä–æ–∫–∏ 234-280).

### –ò–∑–º–µ–Ω–∏—Ç—å –≤–∞–ª—é—Ç—É:
–ó–∞–º–µ–Ω–∏—Ç–µ `‚ÇΩ` –Ω–∞ `$` –∏–ª–∏ –¥—Ä—É–≥—É—é –≤–∞–ª—é—Ç—É –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö.

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ù–ò–ö–û–ì–î–ê** –Ω–µ —Ö—Ä–∞–Ω–∏—Ç–µ –∫–ª—é—á–∏ API –≤ frontend –∫–æ–¥–µ
2. –í—Å—è –ø–ª–∞—Ç–µ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∞ backend
3. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ webhook'–∏ –æ—Ç –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
5. –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ú–∞–≥–∞–∑–∏–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ. 

**–î–ª—è production:**
1. –î–æ–±–∞–≤—å—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ backend API
3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ –ø–ª–∞—Ç–µ–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ø–ª–∞—Ç–µ–∂–µ–π –∏–ª–∏ backend - —Å–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ!

