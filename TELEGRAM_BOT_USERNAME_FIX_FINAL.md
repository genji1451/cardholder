# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï USERNAME –ë–û–¢–ê (–§–ò–ù–ê–õ–¨–ù–û–ï)

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ë–æ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª —Å—Å—ã–ª–∫–∏ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º username:
- **–ë—ã–ª–æ:** `https://t.me/cardholderka_bot?start=...` ‚ùå
- **–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:** `https://t.me/cardloginbot?start=...` ‚úÖ

## üîç –ü—Ä–∏—á–∏–Ω–∞

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ `TELEGRAM_BOT_USERNAME` –≤ `settings.py` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ `os.getenv()`, –∫–æ—Ç–æ—Ä–∞—è —Å—á–∏—Ç—ã–≤–∞–ª–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è. –ì–¥–µ-—Ç–æ –≤ —Å–∏—Å—Ç–µ–º–µ –∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–µ –±—ã–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `TELEGRAM_BOT_USERNAME=cardholderka_bot`, –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–ª–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

### –ß—Ç–æ –±—ã–ª–æ:
```python
TELEGRAM_BOT_USERNAME = os.getenv("TELEGRAM_BOT_USERNAME", "cardloginbot")
# –°—á–∏—Ç—ã–≤–∞–ª–æ –∏–∑ ENV: cardholderka_bot ‚ùå
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–ñ—ë—Å—Ç–∫–æ –ø—Ä–æ–ø–∏—Å–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π username –≤ `settings.py`, —É–±—Ä–∞–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```python
# –ñ—ë—Å—Ç–∫–æ —É–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π username –±–æ—Ç–∞
TELEGRAM_BOT_USERNAME = "cardloginbot"  # ‚úÖ –í—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç cardloginbot
```

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–∏—è

### –§–∞–π–ª: `backend/config/settings.py` (—Å—Ç—Ä–æ–∫–∞ 187)

**–î–æ:**
```python
TELEGRAM_BOT_USERNAME = os.getenv("TELEGRAM_BOT_USERNAME", "cardloginbot")
```

**–ü–æ—Å–ª–µ:**
```python
# –ñ—ë—Å—Ç–∫–æ —É–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π username –±–æ—Ç–∞
TELEGRAM_BOT_USERNAME = "cardloginbot"  # Username –±–æ—Ç–∞ –±–µ–∑ @
```

---

## üöÄ –ó–∞–ø—É—Å–∫

1. **–û—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –±–æ—Ç–∞:**
   ```bash
   ps aux | grep "run_new_bot" | grep -v grep | awk '{print $2}' | xargs kill -9
   ```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª–∏ —Å –Ω–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:**
   ```bash
   cd /Users/rex/Documents/cards/backend
   source venv/bin/activate
   python manage.py run_new_bot &
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É:**
   ```bash
   python -c "from config import settings; print(settings.TELEGRAM_BOT_USERNAME)"
   # –í—ã–≤–æ–¥: cardloginbot ‚úÖ
   ```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—É—é –∫–∞—Ä—Ç—É:

```
/admin ‚Üí –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–∞—Ä—Ç—É
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Å—ã–ª–∫—É –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏:

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
üîó –°—Å—ã–ª–∫–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
https://t.me/cardloginbot?start=6386791a-c2d5-435e-bc45-cf27ac28a2a2
```

‚úÖ `cardloginbot` –≤–º–µ—Å—Ç–æ `cardholderka_bot`

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ QR-–∫–æ–¥:

–°–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ - –æ–Ω –¥–æ–ª–∂–µ–Ω –≤–µ—Å—Ç–∏ –Ω–∞:
```
https://t.me/cardloginbot?start=...
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏:

1. –°–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥
2. –û—Ç–∫—Ä–æ–µ—Ç—Å—è —á–∞—Ç —Å –±–æ—Ç–æ–º `@cardloginbot`
3. –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç `/start {–∫–æ–¥}`
4. ‚úÖ –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞—Ä—Ç–µ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏

---

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "–ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ"

–ï—Å–ª–∏ –ø—Ä–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ QR-–∫–æ–¥–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

### 1. –§–æ—Ä–º–∞—Ç –∫–æ–¥–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–æ–¥ –≤ —Å—Å—ã–ª–∫–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∫–æ–¥–æ–º –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```python
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ Django shell:
from telegram_bot.models import VerifiedCard
card = VerifiedCard.objects.last()
print(f"–ö–æ–¥: {card.verification_code}")
print(f"–°—Å—ã–ª–∫–∞: {card.get_bot_link('cardloginbot')}")
```

### 2. –ö–∞—Ä—Ç–∞ –∞–∫—Ç–∏–≤–Ω–∞

```python
from telegram_bot.models import VerifiedCard
card = VerifiedCard.objects.get(verification_code='–≤–∞—à-–∫–æ–¥')
print(f"–ê–∫—Ç–∏–≤–Ω–∞: {card.is_active}")

# –ï—Å–ª–∏ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞, –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å:
card.is_active = True
card.save()
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω –±–æ—Ç –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è:

```
‚úÖ –£—Å–ø–µ—à–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
Card {id} verified by user {telegram_id}

‚ùå –û—à–∏–±–∫–∞:
Card {verification_code} not found
```

---

## üìä –°—Ç–∞—Ç—É—Å

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:** ‚úÖ –î–∞  
**–ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω:** ‚úÖ –î–∞  
**PID:** 11545  
**Username –ø—Ä–æ–≤–µ—Ä–µ–Ω:** ‚úÖ `cardloginbot`  
**–°—Ç–∞—Ä—ã–µ –∫–∞—Ä—Ç—ã:** ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–æ–≤—ã–π username  

---

## üîê –°—Ç—Ä—É–∫—Ç—É—Ä–∞ username

### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:

- **Username Telegram:** `@cardloginbot` (—Å @)
- **–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö:** `cardloginbot` (–±–µ–∑ @)
- **–í —Å—Å—ã–ª–∫–µ:** `t.me/cardloginbot` (–±–µ–∑ @)

### –£–∑–Ω–∞—Ç—å username –±–æ—Ç–∞:

1. **–ß–µ—Ä–µ–∑ @BotFather:**
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/mybots`
   - –í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞
   - Username —É–∫–∞–∑–∞–Ω –±–µ–∑ @

2. **–ß–µ—Ä–µ–∑ API:**
   ```bash
   curl https://api.telegram.org/bot8089087655:AAH3ZobI5iV5ZTENxyLqQdyDV5nXGfAXTU0/getMe
   ```
   
   –°–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–ª–µ `"username"` –≤ –æ—Ç–≤–µ—Ç–µ.

3. **–ß–µ—Ä–µ–∑ —á–∞—Ç:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç —Å –±–æ—Ç–æ–º
   - –í —à–∞–ø–∫–µ —á–∞—Ç–∞: `@cardloginbot`

---

## üîÑ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ —Å–º–µ–Ω–µ username –±–æ—Ç–∞

–ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å username:

1. **–ò–∑–º–µ–Ω–∏—Ç–µ username —á–µ—Ä–µ–∑ @BotFather:**
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/mybots`
   - –í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞
   - `Edit Bot` ‚Üí `Edit Username`
   - –í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π username

2. **–û–±–Ω–æ–≤–∏—Ç–µ settings.py:**
   ```python
   TELEGRAM_BOT_USERNAME = "–Ω–æ–≤—ã–π_username"
   ```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:**
   ```bash
   pkill -f "run_new_bot"
   cd /Users/rex/Documents/cards/backend
   source venv/bin/activate
   python manage.py run_new_bot &
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   ```bash
   python -c "from config import settings; print(settings.TELEGRAM_BOT_USERNAME)"
   ```

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

### 1. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `backend/.env` (–Ω–æ –æ–Ω –±—É–¥–µ—Ç –≤ .gitignore):

```env
TELEGRAM_BOT_USERNAME=cardloginbot
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
```

–ò–∑–º–µ–Ω–∏—Ç–µ settings.py:

```python
from dotenv import load_dotenv
load_dotenv()

TELEGRAM_BOT_USERNAME = os.getenv("TELEGRAM_BOT_USERNAME", "cardloginbot")
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ username –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞:

–î–æ–±–∞–≤—å—Ç–µ –≤ `bot_new.py` –ø—Ä–æ–≤–µ—Ä–∫—É:

```python
async def start_bot():
    bot_info = await context.bot.get_me()
    print(f"ü§ñ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω: @{bot_info.username}")
    
    if bot_info.username != settings.TELEGRAM_BOT_USERNAME:
        print(f"‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: Username –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö ({settings.TELEGRAM_BOT_USERNAME}) "
              f"–Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º username –±–æ—Ç–∞ ({bot_info.username})")
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ username:

–ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å username –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:

```python
# –í bot_new.py –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:
bot_info = await application.bot.get_me()
ACTUAL_BOT_USERNAME = bot_info.username
```

–ù–æ –ª—É—á—à–µ –∂—ë—Å—Ç–∫–æ –ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏.

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [x] Username –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –≤ `settings.py`
- [x] –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- [x] Username –ø—Ä–æ–≤–µ—Ä–µ–Ω —á–µ—Ä–µ–∑ Django
- [x] –°—Å—ã–ª–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [x] QR-–∫–æ–¥—ã –≤–µ–¥—É—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π username
- [x] –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [x] –°—Ç–∞—Ä—ã–µ –∫–∞—Ä—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–æ–≤—ã–π username

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 17 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 2.5  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢

## üéâ –ò—Ç–æ–≥

**–í—Å–µ —Å—Å—ã–ª–∫–∏ —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ!**

- ‚úÖ –ù–æ–≤—ã–µ –∫–∞—Ä—Ç—ã –ø–æ–ª—É—á–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π username
- ‚úÖ –°—Ç–∞—Ä—ã–µ –∫–∞—Ä—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–æ–≤—ã–π username  
- ‚úÖ QR-–∫–æ–¥—ã –≤–µ–¥—É—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞
- ‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–∞—Ä—Ç—É - –≤—Å—ë –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–¥–µ–∞–ª—å–Ω–æ!** üéâ

