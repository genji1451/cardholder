# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 404 –æ—à–∏–±–∫–∏ –Ω–∞ Vercel

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (F5) –Ω–∞ –ª—é–±–æ–º –º–∞—Ä—à—Ä—É—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä `/auth`, `/dashboard`) –ø–æ—è–≤–ª—è–µ—Ç—Å—è **404 Not Found**.

## üéØ –ü—Ä–∏—á–∏–Ω–∞

–≠—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ **Single Page Application (SPA)**:

1. React Router –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–æ—É—Ç–∏–Ω–≥ –Ω–∞ **–∫–ª–∏–µ–Ω—Ç–µ**
2. –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç URL –Ω–∞–ø—Ä—è–º—É—é, –±—Ä–∞—É–∑–µ—Ä –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É
3. Vercel –ø—ã—Ç–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ —Ñ–∞–π–ª `/auth` –∏–ª–∏ `/dashboard` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
4. –≠—Ç–∏ —Ñ–∞–π–ª—ã –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏ - –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ `index.html`
5. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** 404 Not Found

**–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –Ω–∞ `index.html`, –∞ React Router –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã.

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω `vercel.json`

**–°—Ç–∞–ª–æ:**
```json
{
  "version": 2,
  "builds": [
    {
      "src": "frontend/package.json",
      "use": "@vercel/static-build",
      "config": {
        "distDir": "dist"
      }
    }
  ],
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "https://cardholder.onrender.com/api/$1"
    },
    {
      "handle": "filesystem"
    },
    {
      "src": "/(.*)",
      "dest": "/index.html"
    }
  ]
}
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω `builds` –¥–ª—è –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- ‚úÖ –£–∫–∞–∑–∞–Ω –ø—É—Ç—å –∫ `frontend/package.json`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω `distDir: "dist"` (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ frontend/)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã `routes` –≤–º–µ—Å—Ç–æ `rewrites` –¥–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `handle: "filesystem"` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

### 2. –û–±–Ω–æ–≤–ª–µ–Ω `frontend/package.json`

–î–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç `vercel-build`:
```json
{
  "scripts": {
    "build": "tsc -b && vite build",
    "vercel-build": "npm run build"
  }
}
```

Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç `vercel-build` –ø—Ä–∏ –¥–µ–ø–ª–æ–µ.

### 3. –ü—Ä–æ–≤–µ—Ä–µ–Ω `_redirects`

–§–∞–π–ª `frontend/public/_redirects` —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω:
```
/*    /index.html   200
```

–≠—Ç–æ fallback –¥–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ Vercel –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç rewrites.

---

## üöÄ –î–µ–ø–ª–æ–π

### –®–∞–≥ 1: –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
git add vercel.json frontend/package.json
git commit -m "Fix: 404 error on page refresh - configure monorepo build for Vercel"
git push origin main
```

### –®–∞–≥ 2: –î–æ–∂–¥–∏—Ç–µ—Å—å –¥–µ–ø–ª–æ—è

- –û—Ç–∫—Ä–æ–π—Ç–µ https://vercel.com/dashboard
- –ù–∞–π–¥–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
- –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è (1-2 –º–∏–Ω—É—Ç—ã)

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à URL –Ω–∞ Vercel
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/auth`
3. –ù–∞–∂–º–∏—Ç–µ **F5** (–æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É)
4. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –±–µ–∑ 404

---

## üîç –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí /auth ‚Üí F5
    ‚Üì
–ë—Ä–∞—É–∑–µ—Ä –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç: https://your-app.vercel.app/auth
    ‚Üì
Vercel –∏—â–µ—Ç —Ñ–∞–π–ª: /auth (–Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç)
    ‚Üì
‚ùå 404 Not Found
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí /auth ‚Üí F5
    ‚Üì
–ë—Ä–∞—É–∑–µ—Ä –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç: https://your-app.vercel.app/auth
    ‚Üì
Vercel rewrite: /auth ‚Üí /index.html (200 OK)
    ‚Üì
index.html –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å React + React Router
    ‚Üì
React Router –≤–∏–¥–∏—Ç –ø—É—Ç—å /auth
    ‚Üì
‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ AuthPage
```

---

## üìã –ú–∞—Ä—à—Ä—É—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ —ç—Ç–∏ –º–∞—Ä—à—Ä—É—Ç—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏ –ø—Ä—è–º–æ–º –¥–æ—Å—Ç—É–ø–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏:

| –ú–∞—Ä—à—Ä—É—Ç | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –î–æ—Å—Ç—É–ø |
|---------|-----------|--------|
| `/` | HomePage | –ü—É–±–ª–∏—á–Ω—ã–π |
| `/auth` | AuthPage | –ü—É–±–ª–∏—á–Ω—ã–π |
| `/dashboard` | Dashboard | –ó–∞—â–∏—â–µ–Ω–Ω—ã–π |
| `/portfolio` | SimplePortfolio | –ó–∞—â–∏—â–µ–Ω–Ω—ã–π |
| `/catalog` | CatalogGrid | –ó–∞—â–∏—â–µ–Ω–Ω—ã–π |
| `/inventory` | InventoryGrid | –ó–∞—â–∏—â–µ–Ω–Ω—ã–π |
| `/wishlist` | WishlistPage | –ó–∞—â–∏—â–µ–Ω–Ω—ã–π |
| `/analytics` | AnalyticsPage | –ó–∞—â–∏—â–µ–Ω–Ω—ã–π |

**–ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã:** –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, `ProtectedRoute` –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –Ω–∞ `/auth`.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –º–∞—Ä—à—Ä—É—Ç–∞–º

```
1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É
2. –í–≤–µ–¥–∏—Ç–µ: https://your-app.vercel.app/auth
3. ‚úÖ –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–Ω–µ 404)
```

### –¢–µ—Å—Ç 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

```
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ /dashboard
2. –ù–∞–∂–º–∏—Ç–µ F5 (–æ–±–Ω–æ–≤–∏—Ç—å)
3. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è (–Ω–µ 404)
```

### –¢–µ—Å—Ç 3: –ò—Å—Ç–æ—Ä–∏—è –±—Ä–∞—É–∑–µ—Ä–∞

```
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: / ‚Üí /auth ‚Üí /dashboard
2. –ù–∞–∂–º–∏—Ç–µ "–ù–∞–∑–∞–¥" –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. ‚úÖ –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –ø—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
4. –ù–∞–∂–º–∏—Ç–µ F5
5. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è (–Ω–µ 404)
```

### –¢–µ—Å—Ç 4: –ó–∞–∫–ª–∞–¥–∫–∏

```
1. –î–æ–±–∞–≤—å—Ç–µ /dashboard –≤ –∑–∞–∫–ª–∞–¥–∫–∏
2. –ó–∞–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–∫–ª–∞–¥–∫—É
4. ‚úÖ –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–Ω–µ 404)
   (–µ—Å–ª–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω ‚Üí –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –Ω–∞ /auth)
```

---

## üõ†Ô∏è Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –í—Å—ë –µ—â—ë 404 –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**

1. **–î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω?**
   - –û—Ç–∫—Ä–æ–π—Ç–µ Vercel Dashboard
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–µ–ø–ª–æ—è: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å "Ready"

2. **–ö–µ—à –±—Ä–∞—É–∑–µ—Ä–∞**
   - –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à: Ctrl+Shift+R (Windows) –∏–ª–∏ Cmd+Shift+R (Mac)
   - –ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫ognito

3. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π outputDirectory**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Å–ª–µ –±–∏–ª–¥–∞ –µ—Å—Ç—å —Ñ–∞–π–ª—ã –≤ frontend/dist/
   ls -la frontend/dist/
   # –î–æ–ª–∂–µ–Ω –±—ã—Ç—å index.html
   ```

4. **Vercel Settings**
   - –û—Ç–∫—Ä–æ–π—Ç–µ Settings ‚Üí General
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ "Root Directory": –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ –∏–ª–∏ `/`
   - "Output Directory" –≤ UI Vercel –Ω–µ —Ç—Ä–æ–≥–∞–π—Ç–µ, `vercel.json` –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: 404 —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö

**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ `vercel.json` rewrite –¥–ª—è `/(.*)`  –∏–¥–µ—Ç **–ü–û–°–õ–ï–î–ù–ò–ú**:
```json
"rewrites": [
  {
    "source": "/api/(.*)",
    "destination": "https://cardholder.onrender.com/api/$1"
  },
  {
    "source": "/(.*)",  // ‚Üê –≠—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–º!
    "destination": "/index.html"
  }
]
```

### –ü—Ä–æ–±–ª–µ–º–∞: API –∑–∞–ø—Ä–æ—Å—ã —Ç–æ–∂–µ –∏–¥—É—Ç –Ω–∞ index.html

**–†–µ—à–µ–Ω–∏–µ:**
–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `/api/(.*)` rewrite –∏–¥–µ—Ç **–ü–ï–†–ï–î** `/(.*)`

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```json
{
  "builds": [...],  // –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–æ–¥—Ö–æ–¥
  "routes": [...]   // –¢–æ–∂–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–π
}
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (2024+)
```json
{
  "buildCommand": "...",
  "outputDirectory": "...",
  "rewrites": [...]
}
```

---

## üîó –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **Vercel SPA Configuration:** https://vercel.com/docs/projects/project-configuration
- **React Router + Vercel:** https://reactrouter.com/en/main/guides/deploying
- **Vercel Rewrites:** https://vercel.com/docs/edge-network/rewrites

---

## ‚úÖ Checklist

- [x] –û–±–Ω–æ–≤–ª–µ–Ω `vercel.json` —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- [x] –£–±—Ä–∞–Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∞—è —Å–µ–∫—Ü–∏—è `builds`
- [x] –î–æ–±–∞–≤–ª–µ–Ω `buildCommand` –∏ `outputDirectory`
- [x] Rewrites –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [x] –§–∞–π–ª `_redirects` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
- [ ] –ó–∞–¥–µ–ø–ª–æ–µ–Ω–æ –Ω–∞ Vercel
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

---

**–î–∞—Ç–∞:** 2025-10-11  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é

